<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  
  <title>如何 shell 编程?</title>
  <meta name="author" content="Zachary Zhang">
  <meta name="description" content="This is my personal blog, share knowledge, record life.">
  
  
  <meta property="og:title" content="如何 shell 编程?"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="=just a blogs="/>
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="=just a blogs=" type="application/atom+xml">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <a id="top"></a>
  <div id="main">
    <div class="main-ctnr">
      <div class="behind">
  <a href="/" class="back black-color">
    <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
        <path d="M2 30 L30 2 M30 30 L2 2"></path>
    </svg>
  </a>
  <div class="description">
    &nbsp;Hope to have what you need
  </div>
</div>


  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        如何 shell 编程?
    </h1>
  


    </div>
    <div class="meta center">
      <time datetime="2020-03-03T16:00:00.000Z" itemprop="datePublished">
  <svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2020-03-04
</time>


    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/categories/Linux/">Linux</a>




    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/tags/shell/">shell</a>


    </div>
    <hr>
    <div>
    
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#shell-%E7%AE%80%E4%BB%8B"><span class="toc-text">shell 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell-%E5%8F%98%E9%87%8F"><span class="toc-text">shell 变量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell-%E8%BF%90%E7%AE%97"><span class="toc-text">shell 运算</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5"><span class="toc-text">读取控制台输入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell-%E6%95%B0%E7%BB%84"><span class="toc-text">shell 数组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">条件判断</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">流程控制</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li></ol>
    
    </div>
    <div class="picture-container">
      
    </div>
    <p>基础的 shell 编程知识, 还有一些对应的小例子.</p>
<a id="more"></a>
<h1 id="shell-简介">shell 简介</h1>
<p><strong>shelle</strong>十一个命令行解释器，为用户提供了向<code>linux内核</code>发送请求以便运行程序的界面系统程序，用户可以用<code>shell</code>来启动、挂起、停止甚至编写程序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[外层应用程序] --&gt; B[bash命令解释器]</span><br><span class="line">B --&gt; C[linux内核]</span><br><span class="line">C --&gt; D[硬件]</span><br></pre></td></tr></table></figure>
<h4 id="格式要求">格式要求</h4>
<p>以<code>#!/bin/bash</code>开头，指定 bash 解释器; 这里指定了<code>bash</code></p>
<h4 id="权限要求">权限要求</h4>
<p>执行 shell 脚本，一般给脚本添加<code>执行权限</code>,两种增加权限方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x xxx.sh</span><br><span class="line">sudo chmod 777 xxx.sh</span><br></pre></td></tr></table></figure>
<h4 id="执行方式">执行方式</h4>
<p>两种执行方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./xxx.sh</span><br><span class="line">sh xxx.sh  <span class="comment"># 没有执行权限也可执行</span></span><br></pre></td></tr></table></figure>
<h4 id="注释方法">注释方法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单行注释</span></span><br><span class="line"></span><br><span class="line">：&lt;&lt;!</span><br><span class="line">多行注释</span><br><span class="line">注释内容</span><br><span class="line">!</span><br></pre></td></tr></table></figure>
<h1 id="shell-变量">shell 变量</h1>
<h3 id="系统变量">系统变量</h3>
<p>系统预先定义的，可以直接使用，如：<code>$HOME</code>, <code>$PWD</code>, <code>$bash</code>, <code>$USER</code> 等 使用 <code>set</code> 命令可以查看当前 bash 中所有变量</p>
<h3 id="自定义变量">自定义变量</h3>
<p>通过 <code>变量名=值</code> 定义变量， 使用 <code>unset</code> 可以撤销变量; <code>readonly</code> 声明静态变量，该类型不可 <code>unset</code>。例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">readonly</span> GREET=<span class="string">&quot;hello word&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;Zachary&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$GREET</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;NAME&#125;</span></span><br><span class="line"><span class="built_in">unset</span> NAME</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$NAME</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>变量名可由字母、数字、下划线组成，不能以<code>数字开头</code></li>
<li><code>=</code> 两侧不能有空格</li>
<li>变量一般使用<code>大写</code>方式</li>
<li>调用变量时，需要使用 <code>$</code>符号或者<code>$&#123;&#125;</code></li>
</ul>
</blockquote>
<p>可以将<code>执行指令的结果</code>赋值给变量，例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">RESULT1=`ls -l /home`</span><br><span class="line">RESULT2=$(ls -l /home)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULT1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULT2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>两种方式，推荐使用第二种 <code>RESULT=$(ls -l /home)</code></li>
</ul>
</blockquote>
<h3 id="位置参数变量">位置参数变量</h3>
<p>我们可以获取命令行输入的参数， <code>Sn</code> : <code>n</code>是数字，<code>$0</code>表示命令本身，从<code>$1～$9</code>, 表述命令行输入的第一到第九个参数，第十个及以上要使用<code>&#123;&#125;</code>, 如 <code>$&#123;10&#125;</code> <code>S*</code> : 所有参数，但看作一个整体 <code>S@</code> : 所有参数，但区分个体 <code>S#</code> : 所有参数个数</p>
<h4 id="预定义变量">预定义变量</h4>
<p>bash 设计者已经定义好的，可以直接使用， <code>$$</code>: 当前进程号（PID） <code>$!</code>: 后台运行的最后一个进程号（PID） <code>$?</code>: 最后一次执行命令的返回状态， <code>0</code> 表示正确执行，否则错误执行</p>
<h1 id="shell-运算">shell 运算</h1>
<p><strong>操作</strong>：加、减、乘、除、模; <strong>运算符号</strong>：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code> <strong>形式</strong>：<code>$((运算式))</code>、<code>$[运算式]</code>、<code>expr a - b</code>, 例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">RESULT1=$(((<span class="number">1</span>+<span class="number">2</span>)*<span class="number">3</span>))</span><br><span class="line">RESULT2=$[(1+2)*3]</span><br><span class="line">TEMP=`expr 1 + 2`</span><br><span class="line">RESULT3=`expr <span class="variable">$TEMP</span> \* 3`</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULT1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULT2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$RESULT3</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><code>expr</code> 方式中运算符两侧要有空格，整个元算式需要<code>反引号</code>包裹</li>
<li>推荐使用 <code>$[运算式]</code> 方式</li>
</ul>
</blockquote>
<h1 id="读取控制台输入">读取控制台输入</h1>
<p>基本语法：<code>read 选项 参数</code> <code>-p</code> 指定读取时的提示符 <code>-t</code> 指定读取等待时间，时间内未输入则不再等待输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -t 10 -p <span class="string">&quot;请输入:&quot;</span> A</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$A</span></span><br></pre></td></tr></table></figure>
<h1 id="shell-数组">shell 数组</h1>
<p>一对括号表示是数组，数组元素用<code>空格</code>符号分割开。如：<code>a=(1 2 3 4 5)</code></p>
<p><strong>获取</strong>:用<code>$\&#123;\#数组名\[@或\*\]\&#125;</code>可以得到数组长度, 用<code>$&#123;数组名[下标]&#125;</code>可以得到指定下标的值，下标是从 0 开始; 用<code>$&#123;数组名[@或*]&#125;</code> 可以得到整个数组内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###### 获取 ######</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#a[@]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#a[*]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[2]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[*]&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>赋值</strong>：直接通过 <code>数组名[下标]=值</code>就可以对其进行引用赋值，如果下标不存在，自动添加新一个数组元素</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###### 赋值 ######</span></span><br><span class="line">a[1]=100</span><br></pre></td></tr></table></figure>
<p><strong>删除</strong>：<code>unset 数组[下标]</code>可以清除相应的元素，不带下标，清除整个数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###### 删除 ######</span></span><br><span class="line"><span class="built_in">unset</span> a[1]</span><br><span class="line"><span class="comment"># unset 数组[下标] 不带下标，清除整个数据。</span></span><br><span class="line"><span class="built_in">unset</span> a</span><br></pre></td></tr></table></figure>
<p><strong>截取</strong>：截取数组 <code>$&#123;数组名[@或*]:起始位置:长度&#125;</code>返回字符串，中间用“空格”分开; 如果加上”()”，将得到切片数组。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###### 截取 ######</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]:0:3&#125;</span></span><br><span class="line"><span class="comment"># 如果加上”()”，将得到切片数组，上面例子：c 就是一个新数据。</span></span><br><span class="line">c=(<span class="variable">$&#123;a[@]:1:4&#125;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>替换</strong>：<code>$&#123;数组名[@或*]/查找字符/替换字符&#125;</code> 该操作不会改变原先数组内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###### 替换 ######</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]/3/100&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]&#125;</span></span><br><span class="line"><span class="comment"># 如果需要需求，重新赋值给变量a</span></span><br><span class="line">a=(<span class="variable">$&#123;a[@]/3/100&#125;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="条件判断">条件判断</h1>
<p><strong>形式</strong> <code>[ condition ]</code></p>
<blockquote>
<p>条件语句与<code>[]</code>之间要有空格，<code>[]</code>内是空返回<code>false</code></p>
</blockquote>
<p><strong>常用判断条件</strong></p>
<table>
<tr>
<td colspan="2">
字符串类型
</td>
</tr>
<tr>
<td>
=
</td>
<td>
等于
</td>
</tr>
<tr>
<td>
！=
</td>
<td>
不等于
</td>
</tr>
<tr>
<td>
-z 字符串
</td>
<td>
字符串的长度为零则为真
</td>
</tr>
<tr>
<td>
-n 字符串
</td>
<td>
字符串的长度不为零则为真
</td>
</tr>
</table>
<table>
<tr>
<td colspan="2">
整数类型
</td>
</tr>
<tr>
<td>
-lt
</td>
<td>
小于
</td>
</tr>
<tr>
<td>
-le
</td>
<td>
小于等于
</td>
</tr>
<tr>
<td>
-gt
</td>
<td>
大于
</td>
</tr>
<tr>
<td>
-ge
</td>
<td>
大于等于
</td>
</tr>
<tr>
<td>
-eq
</td>
<td>
等于
</td>
</tr>
<tr>
<td>
-ne
</td>
<td>
不等于
</td>
</tr>
</table>
<table>
<tr>
<td colspan="2">
文件权限
</td>
</tr>
<tr>
<td>
-r
</td>
<td>
有可读权限
</td>
</tr>
<tr>
<td>
-w
</td>
<td>
有可写权限
</td>
</tr>
<tr>
<td>
-x
</td>
<td>
有可执行权限
</td>
</tr>
</table>
<table>
<tr>
<td colspan="2">
文件类型
</td>
</tr>
<tr>
<td>
-e
</td>
<td>
是否文件存在
</td>
</tr>
<tr>
<td>
-f
</td>
<td>
是否是普通文件
</td>
</tr>
<tr>
<td>
-d
</td>
<td>
是否是目录
</td>
</tr>
</table>
<h1 id="流程控制">流程控制</h1>
<h3 id="if-判断">if 判断</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition ];<span class="keyword">then</span></span><br><span class="line">	content</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	content</span><br><span class="line">	<span class="keyword">elif</span> [ condition ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		content</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	content</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>推荐使用第二种</p>
</blockquote>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示用户输入年份后判断该年是否为闰年</span></span><br><span class="line"><span class="comment"># 能被4整除并且并不能被100整除的年份是闰年</span></span><br><span class="line"><span class="comment"># 能被400整除的年份也是闰年</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入一个年份:&quot;</span> YEAR</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$YEAR</span>&quot;</span> = <span class="string">&quot;&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;没有输入年份&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#使用正则测试变量 year 中是否包含大小写字母</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$YEAR</span>&quot;</span> =~ [a‐Z] ]];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;你输入的不是数字&quot;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># 判断是否为闰年</span></span><br><span class="line"><span class="keyword">if</span> [ $[YEAR % 4] -eq 0 ] &amp;&amp; [ $[YEAR % 100] -ne 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$YEAR</span>年是闰年&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ $[YEAR % 400] -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$YEAR</span>年是闰年&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$YEAR</span>年不是闰年&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="case-语句">case 语句</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="variable">$variable_name</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;value&quot;</span>)  <span class="comment"># 传入值与value相等执行content的语句</span></span><br><span class="line">	content</span><br><span class="line">	;;</span><br><span class="line"><span class="string">&quot;value&quot;</span>)</span><br><span class="line">	content</span><br><span class="line">	;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断用户输入的数据类型(字母、数字或其他)</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入一个字符:&quot;</span> KEY</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$KEY</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">[a‐z]|[A‐Z])</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;字母&quot;</span></span><br><span class="line">        ;;</span><br><span class="line">[0‐9])</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;数字&quot;</span></span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;空格、功能键或其他控制字符&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="for-循环">for 循环</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> value1 value2 value3 ...</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	content</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((初始值;循环控制条件;变量变化))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	content</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印国际象棋棋盘</span></span><br><span class="line"><span class="comment"># 设置两个变量,i 和 j,一个代表行,一个代表列,国际象棋为 8*8 棋盘</span></span><br><span class="line"><span class="comment"># i=1 是代表准备打印第一行棋盘,第 1 行棋盘有灰色和蓝色间隔输出,总共为 8 列</span></span><br><span class="line"><span class="comment"># i=1,j=1 代表第 1 行的第 1 列;i=2,j=3 代表第 2 行的第 3 列</span></span><br><span class="line"><span class="comment"># 棋盘的规律是 i+j 如果是偶数,就打印蓝色色块,如果是奇数就打印灰色色块</span></span><br><span class="line"><span class="comment"># 使用 echo ‐ne 打印色块,并且打印完成色块后不自动换行,在同一行继续输出其他色块</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..8&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  	<span class="keyword">for</span> j <span class="keyword">in</span> &#123;1..8&#125;</span><br><span class="line">  	<span class="keyword">do</span></span><br><span class="line">  		sum=$[i+j]</span><br><span class="line">		<span class="keyword">if</span> [  $[sum%2] -eq 0 ];<span class="keyword">then</span></span><br><span class="line"> 			<span class="built_in">echo</span> -ne <span class="string">&quot;\033[46m  \033[0m&quot;</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">echo</span> -ne <span class="string">&quot;\033[47m  \033[0m&quot;</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">  	<span class="keyword">done</span></span><br><span class="line">  	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对 100 以内的所有正整数相加求和(1+2+3+4...+100)</span></span><br><span class="line">SUM=0</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 100`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  	SUM=$[SUM+i]</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;总和是:<span class="variable">$SUM</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="while-循环">while 循环</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ condition]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	content</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取用户输入的账户名称,将账户名写入到数组保存</span></span><br><span class="line"><span class="comment"># 定义数组名称为 name,数组的下标为 i,小标从 0 开始,每输入一个账户名,下标加 1,继续存下一个账户</span></span><br><span class="line"><span class="comment"># 最后,输入 over,脚本输出总结性信息后脚本退出</span></span><br><span class="line">i=0</span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">read</span> -p <span class="string">&quot;请输入账户名,输入 over 结束:&quot;</span> KEY</span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$KEY</span> == <span class="string">&quot;over&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">break</span></span><br><span class="line">  	<span class="keyword">else</span></span><br><span class="line">		NAME[<span class="variable">$i</span>]=<span class="variable">$KEY</span></span><br><span class="line">		<span class="built_in">let</span> i++</span><br><span class="line">  	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;总账户名数量:<span class="variable">$&#123;#NAME[*]&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;NAME[@]&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="函数">函数</h1>
<h3 id="系统函数">系统函数</h3>
<p><code>basename</code></p>
<h3 id="自定义函数">自定义函数</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">func_name</span></span>()&#123;</span><br><span class="line">	content</span><br><span class="line">	<span class="built_in">return</span> ...</span><br><span class="line">&#125;</span><br><span class="line">func_name param1 param2 ...</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>function</code> 关键字可以不写，但推荐写; 可以没有<code>return</code></p>
</blockquote>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 脚本生成一个 100 以内的随机数,提示用户猜数字,根据用户的输入,提示用户猜对了,</span></span><br><span class="line"><span class="comment"># 猜小了或猜大了,直至用户猜对脚本结束。</span></span><br><span class="line"><span class="comment"># RANDOM 为系统自带的系统变量,值为 0‐32767的随机数</span></span><br><span class="line"><span class="comment"># 使用取余算法将随机数变为 1‐100 的随机数</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">guess</span></span>()&#123;</span><br><span class="line">        num=$[RANDOM%100+1]</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$num</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>  :</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">read</span> -p <span class="string">&quot;计算机生成了一个 1‐100 的随机数,你猜: &quot;</span> cai</span><br><span class="line">            <span class="keyword">if</span> [ <span class="variable">$cai</span> -eq <span class="variable">$num</span> ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;恭喜,猜对了&quot;</span></span><br><span class="line">                <span class="built_in">exit</span></span><br><span class="line">                <span class="keyword">elif</span> [ <span class="variable">$cai</span> -gt <span class="variable">$num</span> ]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;猜大了&quot;</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                        <span class="built_in">echo</span> <span class="string">&quot;猜小了&quot;</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line">guess</span><br></pre></td></tr></table></figure>
<p>暂时这么多笔记</p>


  </article>
  </script>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <div class="busuanzi center">
    page PV:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    site PV:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    site UV:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>


    





    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © zachary 2018-2021
    </div>
    <div class="secondrow">
        <a target="_blank" rel="noopener" href="https://github.com/gaoryrt/hexo-theme-pln">
        Theme Pln
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
